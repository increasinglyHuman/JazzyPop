<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economics Display Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
        }
        .status { margin: 10px 0; }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .data { 
            background: #333; 
            padding: 10px; 
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
        button {
            background: #58cc02;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #4db802;
        }
    </style>
</head>
<body>
    <h1>JazzyPop Economics Display Test</h1>
    
    <div class="test-section">
        <h2>1. API Response Test</h2>
        <button onclick="testAPI()">Test Backend API</button>
        <div id="apiStatus" class="status"></div>
        <div id="apiData" class="data" style="display:none;"></div>
    </div>
    
    <div class="test-section">
        <h2>2. Frontend Card Display Test</h2>
        <button onclick="testCardDisplay()">Test Card Economics Display</button>
        <div id="cardStatus" class="status"></div>
        <div id="cardContainer" style="margin-top: 20px;"></div>
    </div>
    
    <div class="test-section">
        <h2>3. Economics Data Samples</h2>
        <button onclick="testDifferentCategories()">Test Different Categories</button>
        <div id="categoryStatus" class="status"></div>
        <div id="categoryData" class="data" style="display:none;"></div>
    </div>

    <script>
        const API_URL = 'https://p0qp0q.com';
        
        async function testAPI() {
            const statusEl = document.getElementById('apiStatus');
            const dataEl = document.getElementById('apiData');
            
            statusEl.textContent = 'Testing API...';
            statusEl.className = 'status';
            
            try {
                const response = await fetch(`${API_URL}/api/content/quiz/sets?count=1`);
                const data = await response.json();
                
                if (data && data[0] && data[0].economics) {
                    statusEl.textContent = 'âœ“ API returns economics data!';
                    statusEl.className = 'status success';
                    dataEl.textContent = JSON.stringify(data[0].economics, null, 2);
                    dataEl.style.display = 'block';
                } else {
                    statusEl.textContent = 'âœ— No economics data in response';
                    statusEl.className = 'status error';
                    dataEl.textContent = JSON.stringify(data[0], null, 2);
                    dataEl.style.display = 'block';
                }
            } catch (error) {
                statusEl.textContent = 'âœ— API Error: ' + error.message;
                statusEl.className = 'status error';
            }
        }
        
        async function testCardDisplay() {
            const statusEl = document.getElementById('cardStatus');
            const containerEl = document.getElementById('cardContainer');
            
            statusEl.textContent = 'Loading card display test...';
            statusEl.className = 'status';
            
            // Simple mock of card display with economics
            const mockCard = {
                title: "Test Quiz",
                category: "science",
                economics: {
                    cost: { energy: 20, minHearts: 0 },
                    rewards: {
                        xp: { min: 30, max: 70 },
                        coins: { min: 60, max: 120 },
                        gems: { min: 0, max: 1 }
                    }
                }
            };
            
            containerEl.innerHTML = `
                <div style="border: 2px solid #58cc02; padding: 20px; border-radius: 8px; max-width: 300px;">
                    <h3>${mockCard.title}</h3>
                    <div style="background: rgba(88,204,2,0.2); padding: 10px; margin: 10px 0; border-radius: 4px;">
                        <strong>Cost:</strong> ${mockCard.economics.cost.energy} âš¡ Energy
                    </div>
                    <div style="background: rgba(88,204,2,0.2); padding: 10px; margin: 10px 0; border-radius: 4px;">
                        <strong>Rewards:</strong><br>
                        ðŸ“Š XP: ${mockCard.economics.rewards.xp.min}-${mockCard.economics.rewards.xp.max}<br>
                        ðŸª™ Coins: ${mockCard.economics.rewards.coins.min}-${mockCard.economics.rewards.coins.max}<br>
                        ðŸ’Ž Gems: ${mockCard.economics.rewards.gems.min}-${mockCard.economics.rewards.gems.max}
                    </div>
                    <button style="width: 100%;">PLAY NOW</button>
                </div>
            `;
            
            statusEl.textContent = 'âœ“ Card display mockup ready';
            statusEl.className = 'status success';
        }
        
        async function testDifferentCategories() {
            const statusEl = document.getElementById('categoryStatus');
            const dataEl = document.getElementById('categoryData');
            
            statusEl.textContent = 'Testing different categories...';
            statusEl.className = 'status';
            
            const categories = ['science', 'gaming', 'ancient_architecture'];
            const results = [];
            
            for (const category of categories) {
                try {
                    const response = await fetch(`${API_URL}/api/content/quiz/sets?count=1&category=${category}`);
                    const data = await response.json();
                    
                    if (data && data[0] && data[0].economics) {
                        results.push({
                            category: category,
                            cost: data[0].economics.cost.energy,
                            xp: data[0].economics.rewards.xp,
                            coins: data[0].economics.rewards.coins
                        });
                    }
                } catch (error) {
                    results.push({ category: category, error: error.message });
                }
            }
            
            statusEl.textContent = `âœ“ Tested ${results.length} categories`;
            statusEl.className = 'status success';
            dataEl.textContent = JSON.stringify(results, null, 2);
            dataEl.style.display = 'block';
        }
    </script>
</body>
</html>