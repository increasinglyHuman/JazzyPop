<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Economy Cards</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="./kawaii-quiz-app/src/styles/components/dashboard.css">
    <link rel="stylesheet" href="./kawaii-quiz-app/src/styles/components/card.css">
    <link rel="stylesheet" href="./kawaii-quiz-app/src/styles/components/card-economics-new.css">
    
    <style>
        body {
            background: #131f24;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        h1 {
            color: #f8f9fa;
            text-align: center;
            margin-bottom: 40px;
        }
        
        .test-controls {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        
        .test-controls button {
            background: var(--primary);
            color: var(--bg-dark);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .test-controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .resource-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            color: #f8f9fa;
            margin-bottom: 20px;
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .resource-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Economy Cards Test</h1>
        
        <div class="resource-display">
            <div class="resource-item">
                <span>‚ö° Energy:</span>
                <span id="energyAmount">100</span>
            </div>
            <div class="resource-item">
                <span>üíé Gems:</span>
                <span id="gemsAmount">5</span>
            </div>
            <div class="resource-item">
                <span>‚ù§Ô∏è Hearts:</span>
                <span id="heartsAmount">5</span>
            </div>
        </div>
        
        <div class="test-controls">
            <button onclick="adjustResources('energy', -50)">Use 50 Energy</button>
            <button onclick="adjustResources('energy', 20)">Add 20 Energy</button>
            <button onclick="adjustResources('gems', -3)">Use 3 Gems</button>
            <button onclick="adjustResources('hearts', -2)">Lose 2 Hearts</button>
            <button onclick="toggleEvent('power-hour')">Toggle Power Hour</button>
            <button onclick="toggleEvent('weekend')">Toggle Weekend Boost</button>
            <button onclick="refreshCards()">Refresh Cards</button>
        </div>
        
        <div class="cards-grid" id="cardsContainer"></div>
    </div>
    
    <!-- Mock Economy Manager -->
    <script>
        window.economyManager = {
            displayCache: {
                energy: 100,
                gems: 5,
                hearts: 5,
                coins: 50
            },
            getResources() {
                return this.displayCache;
            },
            canAfford(cost) {
                const resources = this.getResources();
                if (cost.energy && resources.energy < cost.energy) return false;
                if (cost.gems && resources.gems < cost.gems) return false;
                if (cost.minHearts && resources.hearts < cost.minHearts) return false;
                return true;
            }
        };
        
        // Test controls
        function adjustResources(type, amount) {
            window.economyManager.displayCache[type] += amount;
            window.economyManager.displayCache[type] = Math.max(0, window.economyManager.displayCache[type]);
            updateResourceDisplay();
            refreshCards();
        }
        
        function updateResourceDisplay() {
            document.getElementById('energyAmount').textContent = window.economyManager.displayCache.energy;
            document.getElementById('gemsAmount').textContent = window.economyManager.displayCache.gems;
            document.getElementById('heartsAmount').textContent = window.economyManager.displayCache.hearts;
        }
        
        let activeEvents = [];
        
        function toggleEvent(eventType) {
            const eventIndex = activeEvents.findIndex(e => e.type === eventType);
            if (eventIndex >= 0) {
                activeEvents.splice(eventIndex, 1);
            } else {
                if (eventType === 'power-hour') {
                    activeEvents.push({
                        type: 'power-hour',
                        label: 'POWER HOUR',
                        name: 'Power Hour',
                        costModifier: { type: 'percentage', value: 0.5 }
                    });
                } else if (eventType === 'weekend') {
                    activeEvents.push({
                        type: 'learning-party',
                        label: 'WEEKEND BOOST',
                        name: 'Weekend Learning Party'
                    });
                }
            }
            refreshCards();
        }
    </script>
    
    <!-- Load Components -->
    <script src="./kawaii-quiz-app/src/components/GenericCard.js"></script>
    <script src="./kawaii-quiz-app/src/components/GenericCardEnhanced.js"></script>
    
    <script>
        function createTestCards() {
            const container = document.getElementById('cardsContainer');
            container.innerHTML = '';
            
            // Test Card 1: Affordable Quiz
            const card1 = new GenericCardEnhanced({
                id: 'test-quiz-1',
                type: 'quiz',
                theme: 'standard',
                events: [...activeEvents],
                economics: {
                    cost: {
                        energy: 10,
                        minHearts: 0
                    },
                    rewards: {
                        xp: { min: 10, max: 100 },
                        gems: { min: 0, max: 3 },
                        rare: 'Mystery Box (1% chance)'
                    }
                },
                data: {
                    header: {
                        icon: '<img src="./kawaii-quiz-app/src/images/categories/science.svg" alt="Science" style="width: 100%; height: 100%; object-fit: contain;">',
                        title: 'Brain Teaser Challenge'
                    },
                    body: {
                        description: 'Test your knowledge with today\'s featured quiz! Explore the wonders of science through challenging questions.',
                        badges: [
                            { text: 'Medium', type: 'difficulty' }
                        ]
                    },
                    actions: {
                        primary: { text: 'Play Now!', action: 'test-action' }
                    }
                },
                onAction: (action) => console.log('Action:', action)
            });
            
            // Test Card 2: Chaos Mode (Almost Affordable)
            const card2 = new GenericCardEnhanced({
                id: 'test-quiz-2',
                type: 'quiz',
                theme: 'chaos',
                events: activeEvents.filter(e => e.type === 'learning-party'),
                economics: {
                    cost: {
                        energy: 90,
                        minHearts: 0
                    },
                    rewards: {
                        xp: { min: 50, max: 200 },
                        gems: { min: 2, max: 5 }
                    }
                },
                data: {
                    header: {
                        icon: '<img src="./kawaii-quiz-app/src/images/categories/mythology.svg" alt="Mythology" style="width: 100%; height: 100%; object-fit: contain;">',
                        title: 'Chaos Mode Challenge'
                    },
                    body: {
                        description: 'Can you handle the unpredictable chaos? Rules change every question!',
                        badges: [
                            { text: 'üå™Ô∏è CHAOS', type: 'chaos-mode' },
                            { text: 'Expert', type: 'difficulty' }
                        ]
                    },
                    actions: {
                        primary: { text: 'Embrace Chaos', action: 'test-action' }
                    }
                },
                onAction: (action) => console.log('Action:', action)
            });
            
            // Test Card 3: Zen Mode (Locked - Can't Afford)
            const card3 = new GenericCardEnhanced({
                id: 'test-quiz-3',
                type: 'quiz',
                theme: 'zen',
                events: [],
                economics: {
                    cost: {
                        energy: 20,
                        gems: 10,
                        minHearts: 3
                    },
                    rewards: {
                        xp: { min: 100, max: 500 },
                        gems: { min: 5, max: 10 }
                    }
                },
                data: {
                    header: {
                        icon: '<img src="./kawaii-quiz-app/src/images/categories/nature.svg" alt="Nature" style="width: 100%; height: 100%; object-fit: contain;">',
                        title: 'Zen Master Challenge'
                    },
                    body: {
                        description: 'Find inner peace while solving mindful puzzles. No time pressure, just pure knowledge.',
                        badges: [
                            { text: 'üßò ZEN', type: 'zen-mode' },
                            { text: 'Hard', type: 'difficulty' }
                        ]
                    },
                    actions: {
                        primary: { text: 'Find Peace', action: 'test-action' }
                    }
                },
                onAction: (action) => console.log('Action:', action)
            });
            
            // Test Card 4: Practice Card
            const card4 = new GenericCardEnhanced({
                id: 'test-practice-1',
                type: 'practice',
                theme: 'practice',
                events: [{
                    type: 'limited',
                    label: 'FIRST PRACTICE',
                    name: 'Daily First Practice Bonus'
                }],
                economics: {
                    cost: {
                        energy: 1,
                        minHearts: 0
                    },
                    rewards: {
                        xp: { min: 10, max: 50 },
                        gems: { min: 0, max: 1 }
                    }
                },
                data: {
                    header: {
                        icon: 'üòÑ',
                        title: 'Bad Pun Practice'
                    },
                    body: {
                        description: 'Groan-worthy wordplay to test your pun tolerance! Can you survive the eye-rolls?',
                        badges: [
                            { text: '15 cards', type: 'info' },
                            { text: '5 min', type: 'timer' }
                        ]
                    },
                    actions: {
                        primary: { text: 'Start Practice', action: 'test-action' }
                    }
                },
                onAction: (action) => console.log('Action:', action)
            });
            
            // Test Card 5: Speed Mode
            const card5 = new GenericCardEnhanced({
                id: 'test-quiz-5',
                type: 'quiz',
                theme: 'speed',
                events: [...activeEvents],
                economics: {
                    cost: {
                        energy: 15,
                        minHearts: 2
                    },
                    rewards: {
                        xp: { min: 30, max: 150 },
                        gems: { min: 1, max: 4 }
                    }
                },
                data: {
                    header: {
                        icon: '<img src="./kawaii-quiz-app/src/images/categories/technology.svg" alt="Technology" style="width: 100%; height: 100%; object-fit: contain;">',
                        title: 'Speed Run Challenge'
                    },
                    body: {
                        description: 'Race against time! Quick answers earn bonus points. Are you fast enough?',
                        badges: [
                            { text: '‚ö° SPEED', type: 'speed-mode' },
                            { text: 'Medium', type: 'difficulty' }
                        ]
                    },
                    actions: {
                        primary: { text: 'Go Fast!', action: 'test-action' }
                    }
                },
                onAction: (action) => console.log('Action:', action)
            });
            
            // Render all cards
            container.appendChild(card1.render());
            container.appendChild(card2.render());
            container.appendChild(card3.render());
            container.appendChild(card4.render());
            container.appendChild(card5.render());
        }
        
        function refreshCards() {
            createTestCards();
        }
        
        // Initial setup
        updateResourceDisplay();
        createTestCards();
    </script>
</body>
</html>